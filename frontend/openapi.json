{"openapi":"3.1.0","info":{"title":"CloudLens Backend API","description":"Backend API for CloudLens - AWS Cloud Security Scanning Platform","version":"1.0.0"},"paths":{"/api/scan/aws-cloud-scan":{"post":{"tags":["All API Endpoints","AWS Scanning"],"summary":"Aws Cloud Scan","description":"Initiate an AWS cloud security scan with encrypted credentials.\n\nThis endpoint accepts encrypted AWS credentials and initiates a comprehensive\nsecurity scan across the specified AWS account.\n\nArgs:\n    request: The scan request containing encrypted AWS credentials and configuration\n    background_tasks: FastAPI background tasks for async processing\n    db: Database connection\n\nReturns:\n    ScanResponse: Contains scan ID, status, and other metadata\n\nRaises:\n    HTTPException: If credentials are invalid or scan initialization fails","operationId":"aws_cloud_scan_api_scan_aws_cloud_scan_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AWSCloudScanRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScanResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scan/service-scan-result":{"post":{"tags":["All API Endpoints","AWS Scanning"],"summary":"Get Service Scan Result","description":"Get service scan result data by scan ID, service name, and optional region.\n\nArgs:\n    request: ServiceScanRequest containing scan_id, service_name, and optional region\n    db: Database connection\n\nReturns:\n    ServiceScanResponse: Service scan result data\n\nRaises:\n    HTTPException: If service scan result is not found or error occurs","operationId":"get_service_scan_result_api_scan_service_scan_result_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceScanRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceScanResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scan/scans":{"post":{"tags":["All API Endpoints","AWS Scanning"],"summary":"Get Scans","description":"Get a list of scans with filtering by tenant ID.\n\nArgs:\n    request: ScanListRequest containing tenant_id and optional filters\n    db: Database connection\n\nReturns:\n    List[ScanListResponse]: List of scans matching the criteria\n\nRaises:\n    HTTPException: If there's an error retrieving scans","operationId":"get_scans_api_scan_scans_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScanListRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ScanListResponse"},"type":"array","title":"Response Get Scans Api Scan Scans Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scan/scan-status/{scan_id}":{"get":{"tags":["All API Endpoints","AWS Scanning"],"summary":"Get Scan Status","description":"Get the status of a specific scan.\n\nArgs:\n    scan_id: The unique identifier of the scan\n    db: Database connection\n\nReturns:\n    Dict containing scan status and metadata\n\nRaises:\n    HTTPException: If scan is not found","operationId":"get_scan_status_api_scan_scan_status__scan_id__get","parameters":[{"name":"scan_id","in":"path","required":true,"schema":{"type":"string","title":"Scan Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scan/scan/{scan_id}":{"get":{"tags":["All API Endpoints","AWS Scanning"],"summary":"Get Scan","description":"Get a specific scan by ID with associated service scan results.\n\nArgs:\n    scan_id: The unique identifier of the scan\n    db: Database connection\n\nReturns:\n    Dict containing scan details and service scan results\n\nRaises:\n    HTTPException: If scan is not found","operationId":"get_scan_api_scan_scan__scan_id__get","parameters":[{"name":"scan_id","in":"path","required":true,"schema":{"type":"string","title":"Scan Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/regions/":{"get":{"tags":["All API Endpoints","Cloud Provider Regions"],"summary":"Get Regions","description":"Get all regions, optionally filtered by cloud provider.\n\nArgs:\n    cloud_provider: Optional cloud provider filter (AWS, GCP, AZURE, etc.)\n    db: Database connection\n\nReturns:\n    List[RegionResponse]: List of regions matching the criteria\n\nRaises:\n    HTTPException: If there's an error retrieving regions","operationId":"get_regions_api_regions__get","parameters":[{"name":"cloud_provider","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by cloud provider (AWS, GCP, AZURE, etc.)","title":"Cloud Provider"},"description":"Filter by cloud provider (AWS, GCP, AZURE, etc.)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RegionResponse"},"title":"Response Get Regions Api Regions  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/regions/{cloud_provider}":{"get":{"tags":["All API Endpoints","Cloud Provider Regions"],"summary":"Get Regions By Provider","description":"Get all regions for a specific cloud provider.\n\nArgs:\n    cloud_provider: Cloud provider (AWS, GCP, AZURE, etc.)\n    db: Database connection\n\nReturns:\n    List[RegionResponse]: List of regions for the specified cloud provider\n\nRaises:\n    HTTPException: If there's an error retrieving regions","operationId":"get_regions_by_provider_api_regions__cloud_provider__get","parameters":[{"name":"cloud_provider","in":"path","required":true,"schema":{"type":"string","title":"Cloud Provider"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RegionResponse"},"title":"Response Get Regions By Provider Api Regions  Cloud Provider  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint for health check","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/config":{"get":{"summary":"Get Config","description":"Get public configuration for the frontend","operationId":"get_config_api_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AWSCloudScanRequest":{"properties":{"encrypted_aws_access_key":{"type":"string","title":"Encrypted Aws Access Key"},"encrypted_aws_secret_key":{"type":"string","title":"Encrypted Aws Secret Key"},"encrypted_aws_session_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Encrypted Aws Session Token"},"tenant_id":{"type":"string","title":"Tenant Id"},"excluded_regions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Excluded Regions"},"scan_options":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Scan Options","default":840}},"type":"object","required":["encrypted_aws_access_key","encrypted_aws_secret_key","tenant_id"],"title":"AWSCloudScanRequest","description":"AWS Cloud Scan Request with encrypted credentials"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"RegionResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"cloud_provider":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cloud Provider"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","name","cloud_provider","created_at","updated_at"],"title":"RegionResponse","description":"Region response model"},"ScanListRequest":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"cloud_provider":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cloud Provider"},"limit":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Limit","default":50},"offset":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Offset","default":0}},"type":"object","required":["tenant_id"],"title":"ScanListRequest"},"ScanListResponse":{"properties":{"scan_id":{"type":"string","title":"Scan Id"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"cloud_provider":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cloud Provider"},"created_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created By"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["scan_id","name","status","cloud_provider","created_by","metadata","created_at","updated_at"],"title":"ScanListResponse","description":"Scan list response model"},"ScanResponse":{"properties":{"scan_id":{"type":"string","title":"Scan Id"},"message":{"type":"string","title":"Message"},"status":{"type":"string","title":"Status"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["scan_id","message","status","timestamp"],"title":"ScanResponse","description":"Scan response model"},"ServiceScanRequest":{"properties":{"scan_id":{"type":"string","title":"Scan Id"},"service_name":{"type":"string","title":"Service Name"},"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"}},"type":"object","required":["scan_id","service_name"],"title":"ServiceScanRequest"},"ServiceScanResponse":{"properties":{"id":{"type":"string","title":"Id"},"scan_id":{"type":"string","title":"Scan Id"},"service_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Name"},"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"},"scan_result_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Scan Result Metadata"},"service_scan_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Service Scan Data"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Updated At"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"}},"type":"object","required":["id","scan_id","service_name","region","scan_result_metadata","service_scan_data","created_at","updated_at","tenant_id"],"title":"ServiceScanResponse","description":"Service scan result response model"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}